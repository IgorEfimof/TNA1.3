<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TT Analyzer 10.0 ‚Äî Live Trading Terminal</title>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<style>
:root{
--bg:#06070c;
--card:#121522;
--accent:#2563eb;
--good:#22c55e;
--warn:#f59e0b;
--bad:#ef4444;
--text:#e5e7eb;
--muted:#9ca3af;
}

*{
box-sizing:border-box;
font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif;
}

body{
margin:0;
background:var(--bg);
color:var(--text);
}

.container{
max-width:480px;
margin:auto;
padding:14px;
}

h1{
text-align:center;
font-size:22px;
margin-bottom:10px;
}

.card{
background:var(--card);
border-radius:16px;
padding:16px;
margin-bottom:14px;
}

.upload{
background:var(--accent);
color:#fff;
padding:14px;
border-radius:12px;
text-align:center;
cursor:pointer;
}

input,select{
width:100%;
padding:12px;
border-radius:10px;
border:none;
margin-top:6px;
font-size:15px;
}

label{
font-size:13px;
color:var(--muted);
}

.row{
display:flex;
justify-content:space-between;
padding:6px 0;
border-bottom:1px solid #222;
font-size:14px;
}

.row:last-child{border:none;}

.block{
margin-top:12px;
padding:14px;
border-radius:12px;
}

.good{background:rgba(34,197,94,.12);}
.warn{background:rgba(245,158,11,.12);}
.bad{background:rgba(239,68,68,.12);}

.highlight{
font-size:16px;
font-weight:600;
margin-bottom:6px;
}

button{
width:100%;
padding:12px;
border-radius:10px;
border:none;
margin-top:8px;
font-size:15px;
cursor:pointer;
}

.btn-good{background:var(--good);color:#000;}
.btn-bad{background:var(--bad);color:#fff;}

.alert{
animation:flash 1s infinite;
}

@keyframes flash{
0%{background:#22c55e;}
50%{background:#16a34a;}
100%{background:#22c55e;}
}
</style>
</head>

<body>
<div class="container">

<h1>üèì TT Analyzer 10.0</h1>

<div class="card">
<label class="upload">
üì∏ –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç—á (LIVE –ª–∏–Ω–∏—è)
<input type="file" accept="image/*" onchange="analyze(event)">
</label>
</div>

<div class="card">
<label>–ë–∞–Ω–∫</label>
<input type="number" id="bank" value="1000">
</div>

<div class="card" id="output">
–û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
</div>

<div class="card">
<div class="highlight">üìí Multi-Match Log</div>
<div id="log"></div>
</div>

</div>

<script>
let matches=[];
let lastLine=null;

function analyze(e){
Tesseract.recognize(e.target.files[0],'rus').then(r=>{
processLine(r.data.text);
});
}

function processLine(text){
const odds=text.match(/\d\.\d{2}/g);
if(!odds||odds.length<10){
document.getElementById('output').innerHTML='‚ùå OCR –æ—à–∏–±–∫–∞';
return;
}

const nums=odds.map(Number);
let totals=[
{l:16.5,tm:nums[2],tb:nums[3]},
{l:17.5,tm:nums[4],tb:nums[5]},
{l:18.5,tm:nums[6],tb:nums[7]},
{l:19.5,tm:nums[8],tb:nums[9]},
{l:20.5,tm:nums[10],tb:nums[11]}
];

let best=null;
let momentum=0;

totals.forEach(t=>{
let min=Math.min(t.tm,t.tb);
let max=Math.max(t.tm,t.tb);
if(min>=1.70){
let edge=(max-min)*min;
if(!best||edge>best.edge){
best={
line:t.l,
side:t.tm>t.tb?'–¢–ë':'–¢–ú',
odd:min,
edge
};
}
}
});

if(lastLine){
momentum=best.edge-lastLine.edge;
}
lastLine=best;

let variance=best.edge<0.5?'HIGH':best.edge<1?'MEDIUM':'LOW';

let bank=Number(document.getElementById('bank').value);
let prob=1/(best.odd+0.05);
let kelly=(prob*best.odd-1)/(best.odd-1);
let stake=Math.max(0,kelly*0.25*bank).toFixed(2);

let alert=stake>0 && momentum>0;

document.getElementById('output').innerHTML=`
<div class="block ${alert?'good alert':'good'}">
<div class="highlight">‚≠ê LIVE SETUP</div>
${best.side} ${best.line} @ ${best.odd}<br>
Stake (Kelly): ${stake}<br>
Momentum: ${momentum.toFixed(2)}<br>
Variance: ${variance}
</div>

${alert?'<button class="btn-good">üîî ENTRY ALERT</button>':''}
`;

matches.push({
time:new Date().toLocaleTimeString(),
bet:`${best.side} ${best.line}`,
odd:best.odd,
stake,
momentum,
variance
});

renderLog();
}

function renderLog(){
const el=document.getElementById('log');
el.innerHTML='';
matches.slice().reverse().forEach(m=>{
el.innerHTML+=`
<div class="row">
<span>${m.time} ‚Äî ${m.bet}</span>
<b>${m.odd}</b>
</div>`;
});
}
</script>

</body>
</html>
