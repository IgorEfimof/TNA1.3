<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TT Analyzer 7.0 ‚Äî Professional Line Trader</title>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<style>
:root{
--bg:#090a0f;
--card:#151821;
--accent:#2563eb;
--good:#22c55e;
--warn:#f59e0b;
--bad:#ef4444;
--text:#e5e7eb;
--muted:#9ca3af;
}

*{
box-sizing:border-box;
font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif;
}

body{
margin:0;
background:var(--bg);
color:var(--text);
}

.container{
max-width:430px;
margin:auto;
padding:14px;
}

h1{
text-align:center;
font-size:22px;
margin-bottom:12px;
}

.card{
background:var(--card);
border-radius:16px;
padding:16px;
margin-bottom:14px;
}

.upload{
background:var(--accent);
color:#fff;
padding:14px;
text-align:center;
border-radius:12px;
font-size:16px;
cursor:pointer;
}

input[type=file]{display:none;}

.status{
text-align:center;
font-size:13px;
color:var(--muted);
margin-top:6px;
}

.row{
display:flex;
justify-content:space-between;
padding:6px 0;
border-bottom:1px solid #222;
font-size:14px;
}

.row:last-child{border:none;}

.block{
margin-top:12px;
padding:14px;
border-radius:12px;
}

.good{background:rgba(34,197,94,.12);}
.warn{background:rgba(245,158,11,.12);}
.bad{background:rgba(239,68,68,.12);}

.highlight{
font-size:16px;
font-weight:600;
margin-bottom:6px;
}
</style>
</head>

<body>
<div class="container">

<h1>üèì TT Analyzer 7.0</h1>

<div class="card">
<label class="upload">
üì∏ –ó–∞–≥—Ä—É–∑–∏—Ç—å LIVE-—Å–∫—Ä–∏–Ω 5-–π –ø–∞—Ä—Ç–∏–∏
<input type="file" accept="image/*" onchange="analyze(event)">
</label>
<div class="status" id="status"></div>
</div>

<div class="card" id="output">
–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –ª–∏–Ω–∏–∏
</div>

</div>

<script>
function analyze(e){
const status=document.getElementById('status');
status.innerText='‚è≥ OCR...';

Tesseract.recognize(
e.target.files[0],
'rus',
{logger:m=>status.innerText=`‚è≥ ${Math.round(m.progress*100)}%`}
).then(r=>{
status.innerText='‚úÖ OCR –∑–∞–≤–µ—Ä—à—ë–Ω';
parseLine(r.data.text);
});
}

function parseLine(text){
const odds=text.match(/\d\.\d{2}/g);
if(!odds||odds.length<10){
document.getElementById('output').innerHTML=
'<div class="bad">‚ùå –õ–∏–Ω–∏—è –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞</div>';
return;
}

const nums=odds.map(Number);

// –ø–∞—Ä—Å–∏–º —Ç–æ—Ç–∞–ª—ã (–∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω–µ –ë–ö)
let totals=[
{line:16.5, tm:nums[2], tb:nums[3]},
{line:17.5, tm:nums[4], tb:nums[5]},
{line:18.5, tm:nums[6], tb:nums[7]},
{line:19.5, tm:nums[8], tb:nums[9]},
{line:20.5, tm:nums[10], tb:nums[11]}
];

let candidates=[];
let lbi=0;

totals.forEach(t=>{
let minOdd=Math.min(t.tm,t.tb);
let maxOdd=Math.max(t.tm,t.tb);
let diff=maxOdd-minOdd;

lbi+=diff*12;

if(minOdd>=1.70){
candidates.push({
line:t.line,
side:t.tm>t.tb?'–¢–ë':'–¢–ú',
odd:minOdd,
score:diff*minOdd
});
}
});

lbi=Math.min(100,Math.round(lbi));

candidates.sort((a,b)=>b.score-a.score);

let best=candidates[0];
let second=candidates[1];

let decision='‚ùå –ü–†–û–ü–£–°–¢–ò–¢–¨';
let cls='bad';

if(best && lbi>=60){
decision='‚úÖ –°–¢–ê–í–ò–¢–¨';
cls='good';
}else if(best){
decision='‚ö†Ô∏è –û–°–¢–û–†–û–ñ–ù–û';
cls='warn';
}

document.getElementById('output').innerHTML=`
<div class="row"><span>–ò–Ω–¥–µ–∫—Å –ø–µ—Ä–µ–∫–æ—Å–∞ –ª–∏–Ω–∏–∏</span><b>${lbi}/100</b></div>

${best ? `
<div class="block good">
<div class="highlight">‚≠ê –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞–≤–∫–∞</div>
${best.side} ${best.line} @ ${best.odd}
</div>` : `
<div class="block bad">
<div class="highlight">‚ùå –ü–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å—Ç–∞–≤–æ–∫ –Ω–µ—Ç</div>
–í—Å–µ value –Ω–∏–∂–µ 1.70
</div>`}

${second ? `
<div class="block warn">
<div class="highlight">‚≠ê –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞</div>
${second.side} ${second.line} @ ${second.odd}
</div>` : ''}

<div class="block bad">
<div class="highlight">‚ùå –ò—Å–∫–ª—é—á–µ–Ω–æ</div>
–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –Ω–∏–∂–µ 1.70<br>
–õ–æ–∂–Ω—ã–µ —Ñ–∞–≤–æ—Ä–∏—Ç—ã (1.10‚Äì1.30)
</div>

<div class="block ${cls}">
<div class="highlight">üö¶ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ</div>
${decision}
</div>

<div class="block">
<div class="highlight">üß† –õ–æ–≥–∏–∫–∞</div>
‚Ä¢ –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–∫–æ—Å–∞ —Ç–æ—Ç–∞–ª–æ–≤<br>
‚Ä¢ –û—Ç—Å–µ—á–µ–Ω–∏–µ –º–∏–Ω—É—Å–æ–≤—ã—Ö –∫—ç—Ñ–æ–≤<br>
‚Ä¢ –§–æ–∫—É—Å –Ω–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–º value
</div>
`;
}
</script>

</body>
</html>

